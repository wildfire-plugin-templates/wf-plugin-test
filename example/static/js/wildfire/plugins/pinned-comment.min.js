!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wildfire-pinned-comment",[],t):"object"==typeof exports?exports["wildfire-pinned-comment"]=t():n["wildfire-pinned-comment"]=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e={};return t.m=n,t.c=e,t.i=function(n){return n},t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:r})},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s="rSST")}({"+E39":function(n,t,e){n.exports=!e("S82l")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"+ZMJ":function(n,t,e){var r=e("lOnJ");n.exports=function(n,t,e){if(r(n),void 0===t)return n;switch(e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,o){return n.call(t,e,r,o)}}return function(){return n.apply(t,arguments)}}},"1kS7":function(n,t){t.f=Object.getOwnPropertySymbols},"1xFu":function(n,t,e){"use strict";var r=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("transition",{attrs:{name:"fade"}},[n.pinnedCommentId?e("div",{staticClass:"pinned-comment-header",style:{backgroundColor:n.backgroundColor}},[e("span",[n._v(n._s(n.i18next.t("PinnedComment.pinned_comment")))]),n._v(" "),e("img",{attrs:{src:"https://image.flaticon.com/icons/svg/545/545330.svg"}})]):n._e()])},o=[];r._withStripped=!0;var i={render:r,staticRenderFns:o};t.a=i},"3Eo+":function(n,t){var e=0,r=Math.random();n.exports=function(n){return"Symbol(".concat(void 0===n?"":n,")_",(++e+r).toString(36))}},"4mVN":function(n,t,e){"use strict";var r=e("DZmt"),o=e("vHA1"),i=e("VU/8")(r.a,o.a,null,null,null);i.options.__file="src/plugins/pinned-comment/PinThisComment.vue",i.esModule&&Object.keys(i.esModule).some(function(n){return"default"!==n&&"__"!==n.substr(0,2)}),i.options.functional,t.a=i.exports},"52gC":function(n,t){n.exports=function(n){if(void 0==n)throw TypeError("Can't call method on  "+n);return n}},"77Pl":function(n,t,e){var r=e("EqjI");n.exports=function(n){if(!r(n))throw TypeError(n+" is not an object!");return n}},"7KvD":function(n,t){var e=n.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},"9n9k":function(n,t,e){"use strict";var r=e("woOf"),o=e.n(r);t.a={name:"pinned-comment",props:["bus"],data:function(){return{comment:null}},computed:{backgroundColor:function(){return this.bus.pluginOptions.PinnedComment.backgroundColor||"rgba(0, 0, 0, 0.03)"},pageURL:function(){return this.bus.config.pageURL}},watch:{comment:function(n){var t=n?n.commentId:null;o()(this.bus.plugins,{pinnedComment:t}),this.bus.$emit("PinnedComment.pinnedCommentId",t)}},created:function(){var n=this;this.bus.db.ref("plugins/pinnedComment/"+this.pageURL).on("value",function(t){var e=t.val();e?n.bus.db.ref("comments/"+e).once("value").then(function(t){var r=t.val()||null;n.comment=o()({},r,{commentId:e,parentCommentId:null})}):n.comment=null})}}},CULV:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n.pinned-comment[data-v-68045fcd] { margin-bottom: 8px;\n}\n.fade-enter-active[data-v-68045fcd], .fade-leave-active[data-v-68045fcd] { -webkit-transition: opacity .5s; transition: opacity .5s\n}\n.fade-enter[data-v-68045fcd] { opacity: 0\n}\n.fade-enter-to[data-v-68045fcd] { opacity: 1\n}\n",""])},D2L2:function(n,t){var e={}.hasOwnProperty;n.exports=function(n,t){return e.call(n,t)}},DZmt:function(n,t,e){"use strict";t.a={name:"pin-this-comment",props:["bus","comment"],computed:{i18next:function(){return this.bus.i18next},user:function(){return this.bus.user},pinnedCommentId:function(){return this.bus.plugins.pinnedComment},pageURL:function(){return this.bus.config.pageURL},isPinned:function(){return this.comment.commentId===this.pinnedCommentId}},methods:{handleClick:function(){var n=this,t=this.i18next.t("PinnedComment."+(this.isPinned?"unpin_success":"pin_success"));this.bus.db.ref("plugins/pinnedComment/"+this.pageURL).set(this.isPinned?null:this.comment.commentId).then(function(){n.$Message.success(t)}).catch(function(){n.$Message.error(n.i18next.t("PinnedComment.error"))})}}}},EqjI:function(n,t){n.exports=function(n){return"object"==typeof n?null!==n:"function"==typeof n}},"FZ+f":function(n,t){function e(n,t){var e=n[1]||"",o=n[3];if(!o)return e;if(t&&"function"==typeof btoa){var i=r(o),u=o.sources.map(function(n){return"/*# sourceURL="+o.sourceRoot+n+" */"});return[e].concat(u).concat([i]).join("\n")}return[e].join("\n")}function r(n){return"/*# "+("sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n)))))+" */"}n.exports=function(n){var t=[];return t.toString=function(){return this.map(function(t){var r=e(t,n);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(n,e){"string"==typeof n&&(n=[[null,n,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<n.length;o++){var u=n[o];"number"==typeof u[0]&&r[u[0]]||(e&&!u[2]?u[2]=e:e&&(u[2]="("+u[2]+") and ("+e+")"),t.push(u))}},t}},FeBl:function(n,t){var e=n.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)},Ibhu:function(n,t,e){var r=e("D2L2"),o=e("TcQ7"),i=e("vFc/")(!1),u=e("ax3d")("IE_PROTO");n.exports=function(n,t){var e,c=o(n),s=0,a=[];for(e in c)e!=u&&r(c,e)&&a.push(e);for(;t.length>s;)r(c,e=t[s++])&&(~i(a,e)||a.push(e));return a}},MKhE:function(n,t,e){"use strict";var r=e("P6lz"),o=e("1xFu"),i=!1,u=e("VU/8")(r.a,o.a,function(n){i||e("xOaJ")},"data-v-7881943a",null);u.options.__file="src/plugins/pinned-comment/PinnedCommentHeader.vue",u.esModule&&Object.keys(u.esModule).some(function(n){return"default"!==n&&"__"!==n.substr(0,2)}),u.options.functional,t.a=u.exports},MU5D:function(n,t,e){var r=e("R9M2");n.exports=Object("z").propertyIsEnumerable(0)?Object:function(n){return"String"==r(n)?n.split(""):Object(n)}},MmMw:function(n,t,e){var r=e("EqjI");n.exports=function(n,t){if(!r(n))return n;var e,o;if(t&&"function"==typeof(e=n.toString)&&!r(o=e.call(n)))return o;if("function"==typeof(e=n.valueOf)&&!r(o=e.call(n)))return o;if(!t&&"function"==typeof(e=n.toString)&&!r(o=e.call(n)))return o;throw TypeError("Can't convert object to primitive value")}},NpIQ:function(n,t){t.f={}.propertyIsEnumerable},ON07:function(n,t,e){var r=e("EqjI"),o=e("7KvD").document,i=r(o)&&r(o.createElement);n.exports=function(n){return i?o.createElement(n):{}}},P6lz:function(n,t,e){"use strict";t.a={name:"pinned-comment-header",props:["bus"],data:function(){return{pinnedCommentId:null}},computed:{i18next:function(){return this.bus.i18next},backgroundColor:function(){return this.bus.pluginOptions.PinnedComment.backgroundColor||"rgba(0, 0, 0, 0.03)"}},created:function(){var n=this;this.bus.listenTo("PinnedComment.pinnedCommentId",function(t){n.pinnedCommentId=t})},beforeDestroy:function(){this.bus.enough("PinnedComment.pinnedCommentId")}}},QRG4:function(n,t,e){var r=e("UuGF"),o=Math.min;n.exports=function(n){return n>0?o(r(n),9007199254740991):0}},QmsZ:function(n,t,e){"use strict";var r=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("transition",{attrs:{name:"fade"}},[n.comment?e("wf-comment-card",{key:n.comment.commentId,staticClass:"pinned-comment",style:{backgroundColor:n.backgroundColor},attrs:{comment:n.comment}}):n._e()],1)},o=[];r._withStripped=!0;var i={render:r,staticRenderFns:o};t.a=i},R4wc:function(n,t,e){var r=e("kM2E");r(r.S+r.F,"Object",{assign:e("To3L")})},R9M2:function(n,t){var e={}.toString;n.exports=function(n){return e.call(n).slice(8,-1)}},S82l:function(n,t){n.exports=function(n){try{return!!n()}catch(n){return!0}}},SfB7:function(n,t,e){n.exports=!e("+E39")&&!e("S82l")(function(){return 7!=Object.defineProperty(e("ON07")("div"),"a",{get:function(){return 7}}).a})},TcQ7:function(n,t,e){var r=e("MU5D"),o=e("52gC");n.exports=function(n){return r(o(n))}},To3L:function(n,t,e){"use strict";var r=e("lktj"),o=e("1kS7"),i=e("NpIQ"),u=e("sB3e"),c=e("MU5D"),s=Object.assign;n.exports=!s||e("S82l")(function(){var n={},t={},e=Symbol(),r="abcdefghijklmnopqrst";return n[e]=7,r.split("").forEach(function(n){t[n]=n}),7!=s({},n)[e]||Object.keys(s({},t)).join("")!=r})?function(n,t){for(var e=u(n),s=arguments.length,a=1,f=o.f,p=i.f;s>a;)for(var d,l=c(arguments[a++]),m=f?r(l).concat(f(l)):r(l),v=m.length,h=0;v>h;)p.call(l,d=m[h++])&&(e[d]=l[d]);return e}:s},UuGF:function(n,t){var e=Math.ceil,r=Math.floor;n.exports=function(n){return isNaN(n=+n)?0:(n>0?r:e)(n)}},V3tA:function(n,t,e){e("R4wc"),n.exports=e("FeBl").Object.assign},"VU/8":function(n,t){n.exports=function(n,t,e,r,o){var i,u=n=n||{},c=typeof n.default;"object"!==c&&"function"!==c||(i=n,u=n.default);var s="function"==typeof u?u.options:u;t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),r&&(s._scopeId=r);var a;if(o?(a=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),e&&e.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(o)},s._ssrRegister=a):e&&(a=e),a){var f=s.functional,p=f?s.render:s.beforeCreate;f?s.render=function(n,t){return a.call(t),p(n,t)}:s.beforeCreate=p?[].concat(p,a):[a]}return{esModule:i,exports:u,options:s}}},X8DO:function(n,t){n.exports=function(n,t){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:t}}},ax3d:function(n,t,e){var r=e("e8AB")("keys"),o=e("3Eo+");n.exports=function(n){return r[n]||(r[n]=o(n))}},e8AB:function(n,t,e){var r=e("7KvD"),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});n.exports=function(n){return o[n]||(o[n]={})}},evD5:function(n,t,e){var r=e("77Pl"),o=e("SfB7"),i=e("MmMw"),u=Object.defineProperty;t.f=e("+E39")?Object.defineProperty:function(n,t,e){if(r(n),t=i(t,!0),r(e),o)try{return u(n,t,e)}catch(n){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(n[t]=e.value),n}},fkB2:function(n,t,e){var r=e("UuGF"),o=Math.max,i=Math.min;n.exports=function(n,t){return(n=r(n))<0?o(n+t,0):i(n,t)}},hJx8:function(n,t,e){var r=e("evD5"),o=e("X8DO");n.exports=e("+E39")?function(n,t,e){return r.f(n,t,o(1,e))}:function(n,t,e){return n[t]=e,n}},kM2E:function(n,t,e){var r=e("7KvD"),o=e("FeBl"),i=e("+ZMJ"),u=e("hJx8"),c=function(n,t,e){var s,a,f,p=n&c.F,d=n&c.G,l=n&c.S,m=n&c.P,v=n&c.B,h=n&c.W,b=d?o:o[t]||(o[t]={}),g=b.prototype,x=d?r:l?r[t]:(r[t]||{}).prototype;d&&(e=t);for(s in e)(a=!p&&x&&void 0!==x[s])&&s in b||(f=a?x[s]:e[s],b[s]=d&&"function"!=typeof x[s]?e[s]:v&&a?i(f,r):h&&x[s]==f?function(n){var t=function(t,e,r){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(t);case 2:return new n(t,e)}return new n(t,e,r)}return n.apply(this,arguments)};return t.prototype=n.prototype,t}(f):m&&"function"==typeof f?i(Function.call,f):f,m&&((b.virtual||(b.virtual={}))[s]=f,n&c.R&&g&&!g[s]&&u(g,s,f)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,n.exports=c},lOnJ:function(n,t){n.exports=function(n){if("function"!=typeof n)throw TypeError(n+" is not a function!");return n}},lktj:function(n,t,e){var r=e("Ibhu"),o=e("xnc9");n.exports=Object.keys||function(n){return r(n,o)}},mtrb:function(n,t,e){(n.exports=e("FZ+f")(!1)).push([n.i,"\n.pinned-comment-header[data-v-7881943a] { display: -webkit-box; display: -ms-flexbox; display: flex; -webkit-box-pack: end; -ms-flex-pack: end; justify-content: flex-end; padding: 4px 0 0 0; height: 22px; width: 100%; color: #9ea7b4; font-size: 14px; font-weight: 500;\n}\n.pinned-comment-header span[data-v-7881943a] { margin-right: 8px;\n}\n.pinned-comment-header img[data-v-7881943a] { width: 18px; height: 18px;\n}\n.fade-enter-active[data-v-7881943a], .fade-leave-active[data-v-7881943a] { -webkit-transition: opacity .5s; transition: opacity .5s\n}\n.fade-enter[data-v-7881943a] { opacity: 0\n}\n.fade-enter-to[data-v-7881943a] { opacity: 1\n}\n",""])},oC65:function(n,t,e){"use strict";var r=e("9n9k"),o=e("QmsZ"),i=!1,u=e("VU/8")(r.a,o.a,function(n){i||e("sr06")},"data-v-68045fcd",null);u.options.__file="src/plugins/pinned-comment/PinnedComment.vue",u.esModule&&Object.keys(u.esModule).some(function(n){return"default"!==n&&"__"!==n.substr(0,2)}),u.options.functional,t.a=u.exports},rSST:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("MKhE"),o=e("oC65"),i=e("4mVN");t.default=function(){return{name:"PinnedComment",install:function(n){var t=n.registerComponent,e=n.i18n,u=n.renderAt;e("en",{PinnedComment:{pin:"Pin",pinned_comment:"Pinned Comment",pin_success:"Pinned!",unpin:"Unpin",unpin_success:"Unpinned!",error:"Something went wrong."}}),e("zh-CN",{PinnedComment:{pin:"置顶",pinned_comment:"置顶评论",pin_success:"置顶成功！",unpin:"取消置顶",unpin_success:"取消置顶成功！",error:"置顶操作出错了。"}}),t("pinned-comment-header",r.a),t("pinned-comment",o.a),t("pin-this-comment",i.a),u("comments.before","pinned-comment-header"),u("comments.before","pinned-comment"),u("comment.menu.top","pin-this-comment")},options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}},rjj0:function(n,t,e){function r(n){for(var t=0;t<n.length;t++){var e=n[t],r=f[e.id];if(r){r.refs++;for(u=0;u<r.parts.length;u++)r.parts[u](e.parts[u]);for(;u<e.parts.length;u++)r.parts.push(i(e.parts[u]));r.parts.length>e.parts.length&&(r.parts.length=e.parts.length)}else{for(var o=[],u=0;u<e.parts.length;u++)o.push(i(e.parts[u]));f[e.id]={id:e.id,refs:1,parts:o}}}}function o(){var n=document.createElement("style");return n.type="text/css",p.appendChild(n),n}function i(n){var t,e,r=document.querySelector('style[data-vue-ssr-id~="'+n.id+'"]');if(r){if(m)return v;r.parentNode.removeChild(r)}if(h){var i=l++;r=d||(d=o()),t=u.bind(null,r,i,!1),e=u.bind(null,r,i,!0)}else r=o(),t=c.bind(null,r),e=function(){r.parentNode.removeChild(r)};return t(n),function(r){if(r){if(r.css===n.css&&r.media===n.media&&r.sourceMap===n.sourceMap)return;t(n=r)}else e()}}function u(n,t,e,r){var o=e?"":r.css;if(n.styleSheet)n.styleSheet.cssText=b(t,o);else{var i=document.createTextNode(o),u=n.childNodes;u[t]&&n.removeChild(u[t]),u.length?n.insertBefore(i,u[t]):n.appendChild(i)}}function c(n,t){var e=t.css,r=t.media,o=t.sourceMap;if(r&&n.setAttribute("media",r),o&&(e+="\n/*# sourceURL="+o.sources[0]+" */",e+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a=e("tTVk"),f={},p=s&&(document.head||document.getElementsByTagName("head")[0]),d=null,l=0,m=!1,v=function(){},h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());n.exports=function(n,t,e){m=e;var o=a(n,t);return r(o),function(t){for(var e=[],i=0;i<o.length;i++){var u=o[i];(c=f[u.id]).refs--,e.push(c)}t?r(o=a(n,t)):o=[];for(i=0;i<e.length;i++){var c=e[i];if(0===c.refs){for(var s=0;s<c.parts.length;s++)c.parts[s]();delete f[c.id]}}}};var b=function(){var n=[];return function(t,e){return n[t]=e,n.filter(Boolean).join("\n")}}()},sB3e:function(n,t,e){var r=e("52gC");n.exports=function(n){return Object(r(n))}},sr06:function(n,t,e){var r=e("CULV");"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);e("rjj0")("580c6b0b",r,!1)},tTVk:function(n,t){n.exports=function(n,t){for(var e=[],r={},o=0;o<t.length;o++){var i=t[o],u=i[0],c={id:n+":"+o,css:i[1],media:i[2],sourceMap:i[3]};r[u]?r[u].parts.push(c):e.push(r[u]={id:u,parts:[c]})}return e}},"vFc/":function(n,t,e){var r=e("TcQ7"),o=e("QRG4"),i=e("fkB2");n.exports=function(n){return function(t,e,u){var c,s=r(t),a=o(s.length),f=i(u,a);if(n&&e!=e){for(;a>f;)if((c=s[f++])!=c)return!0}else for(;a>f;f++)if((n||f in s)&&s[f]===e)return n||f||0;return!n&&-1}}},vHA1:function(n,t,e){"use strict";var r=function(){var n=this,t=n.$createElement,e=n._self._c||t;return n.user&&n.user.isAdmin?e("DropdownItem",{attrs:{name:"pinThisComment"},on:{"on-click":n.handleClick}},[n._v("\n  "+n._s(n.i18next.t(n.isPinned?"PinnedComment.unpin":"PinnedComment.pin"))+"\n")]):n._e()},o=[];r._withStripped=!0;var i={render:r,staticRenderFns:o};t.a=i},woOf:function(n,t,e){n.exports={default:e("V3tA"),__esModule:!0}},xOaJ:function(n,t,e){var r=e("mtrb");"string"==typeof r&&(r=[[n.i,r,""]]),r.locals&&(n.exports=r.locals);e("rjj0")("edc708da",r,!1)},xnc9:function(n,t){n.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")}})});